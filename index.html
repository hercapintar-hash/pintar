<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Catatan Pintar Pelajar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body{font-family:Arial;background:#f3f4f6;margin:0}
    header{background:#2563eb;color:#fff;padding:40px 20px;text-align:center}
    section{max-width:800px;margin:auto;padding:20px}
    .box{background:#fff;padding:20px;border-radius:12px;margin-top:20px}
    input,textarea,button{
      width:100%;padding:12px;margin-top:10px;
      border-radius:8px;border:1px solid #ccc
    }
    button{background:#22c55e;color:#fff;font-weight:bold}
    .note{background:#e5e7eb;padding:10px;border-radius:8px;margin-top:10px}
  </style>
</head>

<body>

<header>
  <h1>ðŸ“˜ Catatan Pintar Pelajar</h1>
  <p>Simpan catatan sekolahmu dengan aman</p>
</header>

<section id="auth" class="box">
  <h3>Login / Daftar</h3>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Masuk / Daftar</button>
</section>

<section id="app" class="box" style="display:none">
  <h3>Tulis Catatan</h3>
  <textarea id="note" placeholder="Tulis catatan pelajaran..."></textarea>
  <button onclick="saveNote()">Simpan Catatan</button>

  <h3>Catatan Kamu</h3>
  <div id="notes"></div>

  <button onclick="logout()">Logout</button>
</section>

<script>
  // ðŸ”¥ GANTI DENGAN CONFIG FIREBASE KAMU
  const firebaseConfig = {
    apiKey: "API_KEY_KAMU",
    authDomain: "PROJECT_ID.firebaseapp.com",
    projectId: "PROJECT_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  function login(){
    auth.signInWithEmailAndPassword(email.value,password.value)
      .catch(()=>auth.createUserWithEmailAndPassword(email.value,password.value));
  }

  auth.onAuthStateChanged(user=>{
    if(user){
      authSection.style.display="none";
      app.style.display="block";
      loadNotes();
    }
  });

  const authSection = document.getElementById("auth");

  function saveNote(){
    const user = auth.currentUser;
    db.collection("notes").add({
      uid:user.uid,
      text:note.value,
      time:Date.now()
    });
    note.value="";
    loadNotes();
  }

  function loadNotes(){
    notes.innerHTML="";
    const user = auth.currentUser;
    db.collection("notes")
      .where("uid","==",user.uid)
      .orderBy("time","desc")
      .get()
      .then(snap=>{
        snap.forEach(doc=>{
          notes.innerHTML+=`<div class="note">${doc.data().text}</div>`;
        });
      });
  }

  function logout(){
    auth.signOut();
    location.reload();
  }
</script>

</body>
</html>
